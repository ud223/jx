<!DOCTYPE html>
<html>

<head>
  {:W('Page/wapPageMeta')}
  
  {:W('Page/wapPageTitle')}
  
  {:W('Page/wapPageHeadInclude')}
  
  <style>
    p {
      text-indent: 22px;
    }
    span.mui-icon {
      font-size: 14px;
      color: #007aff;
      margin-left: -15px;
      padding-right: 10px;
    }
    .mui-off-canvas-left {
      color: #fff;
      background-color: #293846;
    }
    .mui-table-view{
      background-color: #293846;
      color: #a7b1c2;
    }
    .title {
      margin: 35px 15px 10px;
    }
    .title+.content {
      margin: 10px 15px 35px;
      color: #a7b1c2 !important;
      text-indent: 1em;
      font-size: 14px;
      line-height: 24px;
    }
    input {
      color: #000;
    }
  </style>
</head>

<body>
<div id="offCanvasWrapper" class="mui-off-canvas-wrap mui-draggable">
  <!--侧滑菜单部分-->
  <aside id="offCanvasSide" class="mui-off-canvas-left">
    <div id="offCanvasSideScroll" class="mui-scroll-wrapper">
      <div class="mui-scroll">
        <div class="title">
          <p>{$AccountInfo.real_name}<label style="font-size: 12px;">（{$GroupName}）</label></p>
        </div>
        <div class="content">
          <p class="mui-icon iconfont icon-signout" style="color: #a7b1c2; font-size: 12px;">
            &nbsp;<a href="__MODULE__/Login/Logout" style="color: #a7b1c2;">安全退出</a>
          </p>
        </div>
        
        <div class="title" style="margin-bottom: 25px;">侧滑列表示例</div>
        <ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted">
          <li class="mui-table-view-cell mui-collapse mui-active">
            <a class="mui-navigate-right">
              Item 1
            </a>
            <ul class="mui-table-view mui-table-view-chevron">
              <li class="mui-table-view-cell">
                <a href="javascript:void(0);" data-href="http://www.baidu.com" class="mui-navigate-right" id="a_test">Item 1-1</a>
              </li>
            </ul>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 2
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 3
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 4
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 5
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 6
            </a>
          </li>
        </ul>
      </div>
    </div>
  </aside>
  <!--主界面部分-->
  <div class="mui-inner-wrap">
    <header class="mui-bar mui-bar-nav">
      <a href="#offCanvasSide" class="mui-icon mui-action-menu mui-icon-bars mui-pull-left"></a>
      <h1 class="mui-title">div模式右滑菜单</h1>
    </header>
    <div id="offCanvasContentScroll" class="mui-content mui-scroll-wrapper">
      <div class="mui-scroll">
        <div class="mui-content-padded">
          <p>这是可拖动式右滑导航示例，主页面和菜单在一个HTML文件中， 优点是支持拖动手势（跟手），缺点是不支持菜单内容在多页面的复用； 当前页面为主界面，你可以在主界面放置任何内容； 打开侧滑菜单有多种方式： 1、在当前页面向右拖动； 2、点击页面左上角的
            <span class="mui-icon mui-icon-bars"></span> 图标； 3、通过JS API触发（例如点击如下蓝色按钮体验）；
            <span class="android-only">4、Android手机按menu键；</span>
          </p>
          
          <p>侧滑菜单的移动动画，支持多种效果，切换如下选项体验不同动画效果：</p>
        </div>
      </div>
    </div>
    <!-- off-canvas backdrop -->
    <div class="mui-off-canvas-backdrop"></div>
  </div>
</div>

{:W('Page/wapPageFootInclude')}

<script>
  mui.init();
  
  //侧滑容器父节点
  var offCanvasWrapper = mui('#offCanvasWrapper');
  offCanvasWrapper[0].classList.add('mui-slide-in');
  
  //菜单容器
  var offCanvasSide = document.getElementById("offCanvasSide");
  
  //主界面和侧滑菜单界面均支持区域滚动；
  mui('#offCanvasSideScroll').scroll();
  mui('#offCanvasContentScroll').scroll();

  //菜单界面，‘关闭侧滑菜单’按钮的点击事件
  
  document.getElementById('a_test').addEventListener('tap', function() {
    var sUrl = $(this).attr('data-href');
    alert(sUrl);
  });
  
  //实现ios平台原生侧滑关闭页面；
  if (mui.os.plus && mui.os.ios) {
    mui.plusReady(function(){
      //5+ iOS暂时无法屏蔽popGesture时传递touch事件，故该demo直接屏蔽popGesture功能
      plus.webview.currentWebview().setStyle({
        'popGesture': 'none'
      });
    });
  }
</script>
</body>

</html>