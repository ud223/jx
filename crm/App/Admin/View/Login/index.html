<!DOCTYPE html>
<!-- 
Template Name: Conquer - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.0
Version: 1.5
Author: KeenThemes
Website: http://www.keenthemes.com/
Purchase: http://themeforest.net/item/conquer-responsive-admin-dashboard-template/3716838?ref=keenthemes
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <title>管理员登陆</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <meta name="MobileOptimized" content="320">

    <!-- BEGIN GLOBAL MANDATORY STYLES -->          
    <link href="__PUBLIC__/res/admin/assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/res/admin/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/res/admin/assets/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES --> 
    <link href="__PUBLIC__/res/admin/assets/plugins/select2/select2_conquer.css" rel="stylesheet" type="text/css" />
    <link href="__PUBLIC__/res/admin/assets/plugins/bootstrap-toastr/toastr.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL SCRIPTS -->
    <!-- BEGIN THEME STYLES --> 
    <link href="__PUBLIC__/res/admin/assets/css/style-conquer.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/res/admin/assets/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/res/admin/assets/css/style-responsive.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/res/admin/assets/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/res/admin/assets/css/themes/grey.css" rel="stylesheet" type="text/css" id="style_color"/>
    <link href="__PUBLIC__/res/admin/assets/css/pages/login.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/res/admin/assets/css/custom.css" rel="stylesheet" type="text/css"/>
    <!-- END THEME STYLES -->
    <link rel="shortcut icon" href="favicon.ico" />
</head>

<!-- BEGIN BODY -->
<body class="login">
    <!-- BEGIN LOGO -->
    <div class="logo">
        <img src="__PUBLIC__/res/admin/assets/img/logo.png" alt="" /> 
    </div>
    <!-- END LOGO -->
    
    <!-- BEGIN LOGIN <form class="login-form" id="loginform" action="__URL__/login" method="post">-->
    <div class="content">
        <!-- BEGIN LOGIN FORM -->
        
            <h3 class="form-title">管理员登陆</h3>

            <div class="form-group" id="usernameTip">
                <label class="control-label visible-ie8 visible-ie9">账号</label>
                <div class="input-icon" id="username_item">
                    <i class="icon-user"></i>
                    <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="账号" name="username" id="username"/>
                </div>
            </div>
            
            <div class="form-group" id="passwordTip">
                <label class="control-label visible-ie8 visible-ie9">密码</label>
                <div class="input-icon" id="password_item">
                    <i class="icon-lock"></i>
                    <input class="form-control placeholder-no-fix" type="password" autocomplete="off" placeholder="密码" name="password" id="password"/>
                </div>
            </div>
            
            <div class="form-group" id="codeTip">
                <label class="control-label visible-ie8 visible-ie9">验证码</label>
                <div class="input-icon" id="code_item">
                    <i class="icon-font"></i>
                    <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="验证码" name="code" id="code"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label visible-ie8 visible-ie9">验证码图片</label>
                <div class="input-icon thumbnail">
                    <img id="verifyImg" src="__URL__/CreateVerify/" class="tooltips" data-original-title="点击刷新验证码" data-placement="bottom" onClick="btten.FleshVerify('verifyImg', 'code');" border="0" title="点击刷新验证码" style="cursor:pointer;" />
                </div>
            </div>
            <div class="form-actions">
                <button type="button" id="btnLogin" data-loading-text="登陆中，请稍后..." class="btn btn-info pull-right" onclick="BttenAdmLogin(this);">登陆</button>
            </div>
        <!-- END LOGIN FORM </form>-->    
    </div>
    <!-- END LOGIN -->
    
    <!-- BEGIN COPYRIGHT -->
    <div class="copyright">{$Think.config.support}</div>
    <!-- END COPYRIGHT -->
    
    <!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
    <!-- BEGIN CORE PLUGINS -->   
    
    <!--[if lt IE 9]>
    <script src="__PUBLIC__/res/admin/assets/plugins/respond.min.js"></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/excanvas.min.js"></script> 
    <![endif]-->   
    
    <script src="__PUBLIC__/res/admin/assets/plugins/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/bootstrap-hover-dropdown/twitter-bootstrap-hover-dropdown.min.js" type="text/javascript" ></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/jquery.blockui.min.js" type="text/javascript"></script>  
    <script src="__PUBLIC__/res/admin/assets/plugins/jquery.cookie.min.js" type="text/javascript"></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/uniform/jquery.uniform.min.js" type="text/javascript" ></script>
    <!-- END CORE PLUGINS -->
    
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="__PUBLIC__/res/admin/assets/plugins/jquery-validation/dist/jquery.validate.min.js" type="text/javascript"></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/select2/select2.min.js" type="text/javascript"></script>
    <script src="__PUBLIC__/res/admin/assets/plugins/bootstrap-toastr/toastr.min.js" type="text/javascript"></script> 
    <!-- END PAGE LEVEL PLUGINS -->
    
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="__PUBLIC__/res/admin/assets/scripts/app.js" type="text/javascript"></script>
    <script src="__PUBLIC__/res/admin/js/btten.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL SCRIPTS --> 
    
    <script>
    $(document).ready(function() {     
        App.init();
        
        $('.form-group input').keypress(function (e) {
            if (e.which === 13) {
                BttenAdmLogin($('#btnLogin'));
            }
        });
    });
    
    function BttenAdmLogin(obj){        
        btten.Validator({"objid":"username", "type":"textbox", "nulltip":"账号必须填写", "required":true});
        btten.Validator({"objid":"password", "type":"textbox", "nulltip":"密码必须填写","required":true});
        btten.Validator({"objid":"code", "type":"textbox", "nulltip":"验证码必须填写","required":true});
        
        var Config = {
            type:  "POST",
            cache: false,
            url:  "__URL__/login",
            dataType: "json",
            success : function(result){
                if(btten.IsN(result)){
                    btten.Error("没有获取到服务器返回消息！");
                    return;
                }

                if(!result.status){
                    btten.Error(result.msg);
                    $('#verifyImg').click();
                }else{
                    window.location.href = "__MODULE__/Index/index"; 
                }
            },
            error : function (xhr, ajaxOptions, thrownError) {
                btten.Error("无法加载请求的内容！");
            }
        };
        
        btten.ValidatorSubmit(Config);
    }
    </script>
    <!-- END JAVASCRIPTS -->
</body>

</html>
